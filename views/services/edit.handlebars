<form action="/services/update/{{service.id}}" method="POST" class="form-container">
    <h2>Editar Serviço</h2>

    <div class="form-group">
        <label for="name">Nome do Serviço:</label>
        <input type="text" id="name" name="name" value="{{service.name}}" >
    </div>

    <div class="form-group">
        <label for="deadline">Data Limite:</label>
        <input type="date" id="deadline" name="deadline" value="{{service.deadline}}" >
    </div>

    <div class="form-group">
        <label for="clientName">Nome do Cliente:</label>
        <input type="text" id="clientName" name="clientName" value="{{service.clientName}}" >
    </div>

    <div class="form-group">
        <label for="location">Local do Serviço:</label>
        <input type="text" id="location" name="location" value="{{service.location}}" >
    </div>

    <div class="form-group">
        <label for="responsible.name">Responsável (Cliente):</label>
        <input type="text" id="responsible.name" name="responsible[name]" value="{{service.responsible.name}}" >
        <input type="text" id="responsible.phone" name="responsible[phone]" value="{{service.responsible.phone}}" >
        <input type="email" id="responsible.email" name="responsible[email]" value="{{service.responsible.email}}" >
    </div>

    <div class="form-group">
        <label for="fieldExecutionDate">Data de Execução de Campo:</label>
        <input type="date" id="fieldExecutionDate" name="fieldExecutionDate" value="{{service.fieldExecutionDate}}" >
    </div>

    <div class="form-group">
        <label for="fieldExecutionTime">Tempo de Execução de Campo (horas):</label>
        <input type="number" id="fieldExecutionTime" name="fieldExecutionTime" value="{{service.fieldExecutionTime}}" >
    </div>

    <div class="form-group">
        <label for="fieldTechnician">Técnico Responsável pelo Campo:</label>
        <input type="text" id="fieldTechnician" name="fieldTechnician" value="{{service.fieldTechnician}}" >
    </div>

    <div class="form-group">
        <label for="processingExecutionDate">Data de Execução de Processamento:</label>
        <input type="date" id="processingExecutionDate" name="processingExecutionDate" value="{{service.processingExecutionDate}}" >
    </div>

    <div class="form-group">
        <label for="processingExecutionTime">Tempo de Execução de Processamento (horas):</label>
        <input type="number" id="processingExecutionTime" name="processingExecutionTime" value="{{service.processingExecutionTime}}" >
    </div>

    <div class="form-group">
        <label for="processingTechnician">Técnico Responsável pelo Processamento:</label>
        <input type="text" id="processingTechnician" name="processingTechnician" value="{{service.processingTechnician}}" >
    </div>

    <div class="form-group">
        <label for="status">Status:</label>
        <select id="status" name="status" required>
            <option value="a fazer" {{#if (eq service.status "a fazer")}}selected{{/if}}>A fazer</option>
            <option value="fazendo" {{#if (eq service.status "fazendo")}}selected{{/if}}>Fazendo</option>
            <option value="feito" {{#if (eq service.status "feito")}}selected{{/if}}>Feito</option>
        </select>
    </div>

    <div class="form-group">
        <label for="notes">Observações:</label>
        <textarea id="notes" name="notes">{{service.notes}}</textarea>
    </div>

    <button type="submit">Atualizar Serviço</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        // Obter os dados das datas da variável do template
        const service = {
            deadline: "{{service.deadline}}",
            fieldExecutionDate: "{{service.fieldExecutionDate}}",
            processingExecutionDate: "{{service.processingExecutionDate}}"
        };

        // Formatar as datas para o formato YYYY-MM-DD, se necessário
        if (service.deadline) {
            document.getElementById('deadline').value = service.deadline;
        }
        if (service.fieldExecutionDate) {
            document.getElementById('fieldExecutionDate').value = service.fieldExecutionDate;
        }
        if (service.processingExecutionDate) {
            document.getElementById('processingExecutionDate').value = service.processingExecutionDate;
        }
    });
</script>
